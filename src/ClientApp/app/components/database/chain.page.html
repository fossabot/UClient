<ng-container *ngIf="block">
    <database-nav [dbid]="db.id" [dbname]="db.name" current="{{ 'db.nav.ChainBlock' | translate: {hash: block.Hash} }}"></database-nav>
    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">{{ 'db.chain.block.SummaryTitle' | translate }}</h3>
        </div>
        <table class="table">
            <tbody>
                <tr>
                    <td><strong>{{ 'db.chain.block.Hash' | translate }}</strong></td>
                    <td><a [routerLink]="['/database', db.id, 'chain', block.Hash]">{{block.Hash | hashbeauty}}</a></td>
                </tr>
                <tr>
                    <td><strong>{{ 'db.chain.block.Time' | translate }}</strong></td>
                    <td>{{block.Time | date}}</td>
                </tr>
                <tr>
                    <td><strong>{{ 'db.chain.block.Height' | translate }}</strong></td>
                    <td>
                        <a class="btn btn-primary btn-xs" [routerLink]="['/database', db.id, 'chain', block.Height - 1]">{{ 'db.chain.block.Previous' | translate }}</a>
                        <a [routerLink]="['/database', db.id, 'chain', block.Height]">{{block.Height}}</a>
                        <a class="btn btn-primary btn-xs" [routerLink]="['/database', db.id, 'chain', block.Height + 1]">{{ 'db.chain.block.Next' | translate }}</a>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="panel-heading">
            <h3 class="panel-title">{{ 'db.chain.block.TransactionsTitle' | translate }}</h3>
        </div>
        <table class="table">
            <tbody>
                <tr *ngFor="let tran of block.Transactions">
                    <td><a [routerLink]="['/database', db.id, 'chain', tran.Hash]">{{tran.Hash | hashbeauty}}</a></td>
                    <td>
                        <ng-container [ngSwitch]="tran.Type">
                            <ng-template [ngSwitchCase]="0">
                                {{ 'db.chain.block.DataTransactionName' | translate }}
                            </ng-template>
                            <ng-template [ngSwitchCase]="1">
                                {{ 'db.chain.block.SchemaTransactionName' | translate }}
                            </ng-template>
                        </ng-container>
                        {{ 'db.chain.block.TransactionSuffix' | translate: {length: tran.Actions?.length} }}
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="panel-heading">
            <h3 class="panel-title">{{ 'db.chain.block.ActionsTitle' | translate }}</h3>
        </div>
        <div class="panel-body">
            <database-action [dbid]="db.id" [transactions]="block.Transactions"></database-action>
        </div>
    </div>
</ng-container>

<ng-container *ngIf="transaction">
    <database-nav [dbid]="db.id" [dbname]="db.name" current="{{ 'db.nav.ChainTransaction' | translate: {hash: transaction.Hash} }}"></database-nav>
    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">{{ 'db.chain.transaction.SummaryTitle' | translate }}</h3>
        </div>
        <table class="table">
            <tbody>
                <tr>
                    <td><strong>{{ 'db.chain.transaction.Hash' | translate }}</strong></td>
                    <td><a [routerLink]="['/database', db.id, 'chain', transaction.Hash]">{{transaction.Hash | hashbeauty}}</a></td>
                </tr>
                <tr>
                    <td><strong>{{ 'db.chain.transaction.Time' | translate }}</strong></td>
                    <td>(TBD)</td>
                </tr>
                <tr>
                    <td><strong>{{ 'db.chain.transaction.Type' | translate }}</strong></td>
                    <td>
                        <ng-container [ngSwitch]="transaction.Type">
                            <ng-template [ngSwitchCase]="'DataTransaction'">
                                {{ 'db.chain.transaction.DataTransactionName' | translate }}
                            </ng-template>
                            <ng-template [ngSwitchCase]="'SchemaTransaction'">
                                {{ 'db.chain.transaction.SchemaTransactionName' | translate }}
                            </ng-template>
                        </ng-container>
                    </td>
                </tr>
                <tr>
                    <td><strong>{{ 'db.chain.transaction.Block' | translate }}</strong></td>
                    <td><a [routerLink]="['/database', db.id, 'chain', 'BDCF3E245']">(TBD)</a></td>
                </tr>
                <tr>
                    <td><strong>{{ 'db.chain.transaction.Initiator' | translate }}</strong></td>
                    <td><a [routerLink]="['/database', db.id, 'chain', transaction.Initiator]">{{transaction.Initiator | hashbeauty}}</a></td>
                </tr>
            </tbody>
        </table>
        <div class="panel-heading">
            <h3 class="panel-title">{{ 'db.chain.transaction.ActionsTitle' | translate }}</h3>
        </div>
        <div class="panel-body">
            <database-action [dbid]="db.id" [transactions]="[transaction]"></database-action>
        </div>
    </div>
</ng-container>
